<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="fragments/head"></th:block>
</head>
<body class="horizontal-layout horizontal-top-icon-menu 2-columns   menu-expanded" data-open="hover" data-menu="horizontal-menu" data-col="2-columns">
  <!-- fixed-top-->
    <th:block th:include="fragments/nav"></th:block>
  <!-- ////////////////////////////////////////////////////////////////////////////-->
  <!-- Horizontal navigation-->
    <th:block th:include="fragments/hnav"></th:block>
  <!-- Horizontal navigation-->

  <th:block th:include="fragments/order/search"></th:block>
  
  <th:block th:include="fragments/footer"></th:block>
  <script>
    // Lưu đối tượng table kết quả search
    var resultTable = null;
    var vehicleData;
    
    $(document).ready(function() {
        var customerId = 1;
        
        function getCustomerData(handleData) {
	        $.ajax({
	            url : _ctx + "customer/load-customer/" + customerId,
	            type : "GET",
	            contentType: "application/json",
	            dataType: 'json',

	            success : function(result) {
	            	handleData(result);
	            },
	            error : function() {
	                console.log("Error!");
	            }
	        });
        }

    	if (resultTable == null) {
    		getCustomerData(function(output){
    			console.log("output Data");	
    			console.log(output);	      
    		
	            $("#resultTable").DataTable({
	                ajax: {'url': _ctx + 'order/load-order', 'dataSrc': ''},
	                "columns": [
	                	{"render": function ( data, type, full, meta ) {
                            // return '<input type="radio" name="addressRow" value="' + full.displayAddress + '">';
                           // Assign address id and displayAddress
                    	   return '<a href="order/new">'+full.id+'</a>';
                       }}, 
	                       { 
	                           "data": null, 
	                           render: function (data, type, row) {
	                              
	                                       return output.name;
	                                   }
	                       },
	                       { 
	                           "data": null, 
	                           render: function (data, type, row) {
	                    
	                                       return output.phone;
	                                   }
	                       },
	                       { 
	                           "data": null, 
	                           render: function (data, type, row) {
	                                     
	                                       return output.addr;
	                                   }
	                       },
	                	   { "data": "deliveryDate" }
	                       ]
	            });
  
    	  });
    	} else {
            resultTable.fnDraw();
        }
    });
</script>
</body>
</html>